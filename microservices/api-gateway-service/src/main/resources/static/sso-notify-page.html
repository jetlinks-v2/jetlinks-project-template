<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirect</title>
    <script>
        //请求路径：http://前端IP:port/api/sso-notify-page.html

        window.onload = redirect;

        function redirect() {
            var application = getQueryVariable("application");
            if (application) {
                let origin = window.location.origin;
                //目前使用非hash模式，不要#
                window.location.href = origin + "/oauth?sopce=*&response_type=code&redirect_uri=" + encodeURI(origin + "/api/sso-notify-page.html") + "&client_id=" + application;
            } else {
                document.getElementById("message").innerText = "访问成功，回调参数：" + window.location.search.substring(1);
            }
        }

        function getQueryVariable(variable) {
            var query = window.location.search.substring(1);
            if (query) {
                var vars = query.split("&");
                for (var i = 0; i < vars.length; i++) {
                    var pair = vars[i].split("=");
                    if (pair[0] === variable) {
                        return pair[1];
                    }
                }
            }
            return false;
        }
    </script>
</head>
<body>
<p id="message"></p>
</body>
</html>
